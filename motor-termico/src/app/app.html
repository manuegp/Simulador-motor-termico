<main class="app-shell">
  <app-simulation-header [totalPuntos]="temperaturas().length"></app-simulation-header>

  <section class="content-grid">
    <app-config-form
      [formGroup]="tempForm"
      (add)="addTemperatura()"
      (load)="loadTemperaturas($event)"
    ></app-config-form>

    <app-temperaturas-list
      [dataSource]="dataSourceEntrada"
      [displayedColumns]="displayedColumnsEntrada"
      [totalPuntos]="temperaturas().length"
      (remove)="removeTemperatura($event)"
      (clearAll)="clearTemperaturas()"
      (ejecutar)="ejecutar()"
    ></app-temperaturas-list>
  </section>

  <section [hidden]="dataSourceResultados.data.length === 0" class="results-section">
    <app-resultados-chart
      [data]="dataSourceResultados.data"
      [hoveredIndex]="hoveredResultadoIndex()"
    ></app-resultados-chart>
    <app-resultados-table
      [dataSource]="dataSourceResultados"
      [displayedColumns]="displayedColumnsResultados"
      (hoverRow)="hoveredResultadoIndex.set($event)"
    ></app-resultados-table>
  </section>

  @if (isLoading()) {
    <div class="ui-blocker" role="status" aria-live="polite">
      <div class="spinner-card">
        <mat-progress-spinner mode="indeterminate" diameter="48"></mat-progress-spinner>
        <p>Simulacion en curso...</p>
      </div>
    </div>
  }
</main>
