<mat-card class="card config-card">
  <div class="card-header">
    <div>
      <h2 class="card-title">Configuración de simulación</h2>
      <p class="card-subtitle">Añade pares entrada/ambiente por punto o cárgalos desde un archivo.</p>
    </div>
    <div class="header-chip">
      <mat-icon aria-hidden="true">playlist_add</mat-icon>
      <span>1 punto = 2 valores</span>
    </div>
  </div>

  <mat-card-content class="card-body mt-3">
        <form [formGroup]="formGroup" class="form-grid">
      <div class="inputs-row">
        <mat-form-field appearance="outline" class="field">
          <mat-label>Temperatura de entrada (°C)</mat-label>
          <input
            matInput
            type="number"
            formControlName="temperaturaEntrada"
            (keydown.enter)="onAdd()"
            inputmode="decimal"
            placeholder="Ej: 120"
          />
          <mat-hint>Fluido que entra al tubo</mat-hint>
        </mat-form-field>

        <mat-form-field appearance="outline" class="field">
          <mat-label>Temperatura ambiente (°C)</mat-label>
          <input
            matInput
            type="number"
            formControlName="temperaturaAmbiente"
            (keydown.enter)="onAdd()"
            inputmode="decimal"
            placeholder="Ej: 20"
          />
          <mat-hint>Aire exterior alrededor del tubo</mat-hint>
        </mat-form-field>
      </div>

      <div class="actions-row">
        <button mat-raised-button color="primary" type="button" (click)="onAdd()" class="primary-action">
          <mat-icon class="me-2" color="primary">add</mat-icon>
          Añadir punto
        </button>
        <p class="helper-text">Tip: puedes pegar valores y presionar Enter.</p>
      </div>
    </form>

    <div
      class="file-drop"
      [class.is-dragover]="isDragOver"
      (dragover)="onDragOver($event)"
      (dragleave)="onDragLeave($event)"
      (drop)="onDrop($event)"
    >
      <input
        type="file"
        accept=".csv,.xlsx"
        class="file-input"
        (change)="onFileSelected($event)"
        #fileInput
      />
      <div class="file-content">
        <mat-icon color="primary">upload_file</mat-icon>
        <div>
          <p class="file-title">Arrastra tu archivo o haz clic para subir</p>
          <p class="file-subtitle">Formato recomendado: entrada,ambiente (dos columnas)</p>
          <code class="file-example">120,20</code>
        </div>
        <button mat-stroked-button color="primary" type="button" (click)="fileInput.click()">
          Buscar archivo
        </button>
      </div>
    </div>

    @if(fileError) {
      <p class="file-error">{{ fileError }}</p>
    }
  </mat-card-content>
</mat-card>



