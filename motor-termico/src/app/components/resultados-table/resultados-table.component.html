<mat-card class="card results-card">
  <div class="card-header">
    <div>
      <h2 class="card-title">Resultados obtenidos</h2>
      <p class="card-subtitle">Compara la entrada y la salida en cada tiempo.</p>
    </div>
    <div class="header-actions">
      <button
        mat-stroked-button
        color="primary"
        type="button"
        (click)="exportCsv()"
        [disabled]="!dataSource.data.length"
        aria-label="Exportar resultados a CSV"
      >
        <mat-icon>download</mat-icon>
        Exportar CSV
      </button>
      <mat-icon class="card-icon" color="primary" aria-hidden="true">insights</mat-icon>
    </div>
  </div>

  <mat-card-content class="card-body p-0">
    <div class="table-responsive table-scroll">
      <table
        mat-table
        [dataSource]="dataSource"
        matSort
        class="w-100 compact-table table table-sm table-hover align-middle mb-0"
      >
        <ng-container matColumnDef="tiempo">
          <th mat-header-cell *matHeaderCellDef mat-sort-header class="ps-4"> Tiempo </th>
          <td mat-cell *matCellDef="let element" class="ps-4" [attr.data-label]="'Tiempo'">
            {{ element.tiempo }}s
          </td>
        </ng-container>

        <ng-container matColumnDef="entrada">
          <th mat-header-cell *matHeaderCellDef mat-sort-header> Entrada </th>
          <td mat-cell *matCellDef="let element" [attr.data-label]="'Entrada'">
            {{ element.entrada }}°C
          </td>
        </ng-container>

        <ng-container matColumnDef="ambiente">
          <th mat-header-cell *matHeaderCellDef mat-sort-header> Ambiente </th>
          <td mat-cell *matCellDef="let element" [attr.data-label]="'Ambiente'">
            {{ element.ambiente }}°C
          </td>
        </ng-container>

        <ng-container matColumnDef="salida">
          <th mat-header-cell *matHeaderCellDef mat-sort-header> Salida </th>
          <td
            mat-cell
            *matCellDef="let element"
            class="text-primary fw-semibold"
            [attr.data-label]="'Salida'"
          >
            {{ element.salida  }}°C
          </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr
          mat-row
          *matRowDef="let row; columns: displayedColumns"
          (mouseenter)="emitHover(row)"
          (mouseleave)="emitHover(null)"
        ></tr>
      </table>
    </div>

    <mat-paginator [pageSizeOptions]="[5, 10, 25]" showFirstLastButtons></mat-paginator>
  </mat-card-content>
</mat-card>

